<div class="min-h-screen" style="background-color: var(--minted-bg-page);">
  <!-- Header -->
  <header class="shadow-sm border-b"
    style="background-color: var(--minted-bg-card); border-color: var(--minted-border);">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center">
      <button (click)="goBack()" class="mr-4 p-2 rounded-lg transition-colors"
        style="color: var(--minted-text-secondary);">
        <i class="pi pi-arrow-left" style="font-size: 1.25rem;"></i>
      </button>
      <div class="flex items-center">
        <div class="inline-flex items-center justify-center w-10 h-10 rounded-full mr-3"
          style="background-color: var(--minted-accent-subtle); color: var(--minted-accent);">
          <i class="pi pi-upload" style="font-size: 1.5rem;"></i>
        </div>
        <div>
          <h1 class="text-2xl font-bold" style="color: var(--minted-text-primary);">Parse New Statement</h1>
          <p class="text-sm" style="color: var(--minted-text-muted);">Upload a credit card PDF statement to extract transactions</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <form [formGroup]="uploadForm" (ngSubmit)="onUpload()">
      <div class="space-y-6">
        <!-- File Upload -->
        <div class="rounded-lg border p-6"
          style="background-color: var(--minted-bg-card); border-color: var(--minted-border);">
          <label class="block text-sm font-semibold mb-3" style="color: var(--minted-text-primary);">
            PDF Statement File
          </label>

          <div *ngIf="!selectedFile" class="border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors"
            style="border-color: var(--minted-border);"
            (click)="fileInput.click()">
            <i class="pi pi-file-pdf text-3xl mb-3" style="color: var(--minted-text-muted);"></i>
            <p class="font-medium" style="color: var(--minted-text-primary);">Click to select a PDF file</p>
            <p class="text-sm mt-1" style="color: var(--minted-text-muted);">Maximum file size: 20MB</p>
            <input #fileInput type="file" accept=".pdf,application/pdf" class="hidden" (change)="onFileSelect($event)">
          </div>

          <div *ngIf="selectedFile" class="flex items-center justify-between p-4 rounded-lg"
            style="background-color: var(--minted-surface);">
            <div class="flex items-center gap-3">
              <i class="pi pi-file-pdf text-xl" style="color: var(--minted-accent);"></i>
              <div>
                <p class="font-medium text-sm" style="color: var(--minted-text-primary);">{{ selectedFile.name }}</p>
                <p class="text-xs" style="color: var(--minted-text-muted);">{{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB</p>
              </div>
            </div>
            <button type="button" (click)="removeFile()" class="p-2 rounded-lg transition-colors"
              style="color: var(--minted-error);">
              <i class="pi pi-times"></i>
            </button>
          </div>
        </div>

        <!-- Account Selection -->
        <div class="rounded-lg border p-6"
          style="background-color: var(--minted-bg-card); border-color: var(--minted-border);">
          <label class="block text-sm font-semibold mb-3" style="color: var(--minted-text-primary);">
            Target Account
          </label>
          <p-select formControlName="accountId" [options]="accountOptions" optionLabel="label" optionValue="value"
            placeholder="Select account for imported transactions" [style]="{width: '100%'}">
          </p-select>
        </div>

        <!-- Password (Optional) -->
        <div class="rounded-lg border p-6"
          style="background-color: var(--minted-bg-card); border-color: var(--minted-border);">
          <div class="flex items-center gap-2 mb-3">
            <p-checkbox [(ngModel)]="showPassword" [ngModelOptions]="{standalone: true}" [binary]="true"
              inputId="showPwd"></p-checkbox>
            <label for="showPwd" class="text-sm font-semibold cursor-pointer"
              style="color: var(--minted-text-primary);">
              Statement is password protected
            </label>
          </div>
          <div *ngIf="showPassword" class="mt-3">
            <input type="password" pInputText formControlName="pdfPassword" placeholder="Enter PDF password"
              class="w-full">
          </div>
        </div>

        <!-- Submit -->
        <div class="flex justify-end gap-3">
          <p-button label="Cancel" (onClick)="goBack()" styleClass="p-button-text p-button-secondary"></p-button>
          <p-button type="submit" label="Upload & Extract Text" icon="pi pi-upload"
            [disabled]="!selectedFile || uploadForm.invalid || uploading"
            [loading]="uploading"
            styleClass="p-button-primary"></p-button>
        </div>
      </div>
    </form>
  </main>
</div>

<p-toast position="top-right"></p-toast>
