<!-- Background with decorative elements -->
<div class="min-h-screen flex items-center justify-center p-4 relative overflow-hidden" style="background-color: #f8f7f6;">
  <!-- Decorative Background Blurs -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
    <div class="absolute -top-[20%] -left-[10%] w-[60%] h-[60%] rounded-full blur-3xl" style="background-color: rgba(196, 136, 33, 0.05);"></div>
    <div class="absolute top-[40%] -right-[10%] w-[50%] h-[50%] rounded-full blur-3xl" style="background-color: rgba(196, 136, 33, 0.05);"></div>
  </div>

  <!-- Main Change Password Card -->
  <main class="relative z-10 w-full max-w-md bg-white shadow-lg border overflow-hidden login-card">
    <!-- Header Section with Logo -->
    <div class="pt-10 pb-6 px-8 text-center">
      <!-- Gold Coin Icon -->
      <div class="inline-flex items-center justify-center w-14 h-14 rounded-full mb-4 shadow-sm logo-icon">
        <i class="pi pi-shield" style="font-size: 1.875rem;"></i>
      </div>
      <h1 class="text-2xl font-bold tracking-tight" style="color: #1e293b;">Change Password</h1>
      <p class="mt-2 text-sm" style="color: #857f79;">Please update your password to continue</p>
    </div>

    <!-- Form Section -->
    <form *ngIf="changePasswordForm" [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="px-8 pb-10 space-y-6">
      <!-- Current Password Input -->
      <div>
        <p-iconfield styleClass="w-full">
          <p-inputicon styleClass="pi pi-lock" />
          <p-password
            formControlName="currentPassword"
            [toggleMask]="true"
            [feedback]="false"
            placeholder="Current Password"
            inputStyleClass="w-full"
            styleClass="w-full"
          />
        </p-iconfield>
        <small class="p-error block mt-1" *ngIf="f['currentPassword']?.invalid && f['currentPassword']?.touched">
          Current password is required
        </small>
      </div>

      <!-- New Password Input -->
      <div>
        <p-iconfield styleClass="w-full">
          <p-inputicon styleClass="pi pi-key" />
          <p-password
            formControlName="newPassword"
            [toggleMask]="true"
            [feedback]="true"
            placeholder="New Password"
            inputStyleClass="w-full"
            styleClass="w-full"
          />
        </p-iconfield>
        <small class="p-error block mt-1" *ngIf="f['newPassword']?.invalid && f['newPassword']?.touched">
          <span *ngIf="f['newPassword']?.errors?.['required']">New password is required</span>
          <span *ngIf="f['newPassword']?.errors?.['minlength']">Password must be at least 6 characters</span>
        </small>
      </div>

      <!-- Confirm New Password Input -->
      <div>
        <p-iconfield styleClass="w-full">
          <p-inputicon styleClass="pi pi-key" />
          <p-password
            formControlName="confirmPassword"
            [toggleMask]="true"
            [feedback]="false"
            placeholder="Confirm New Password"
            inputStyleClass="w-full"
            styleClass="w-full"
          />
        </p-iconfield>
        <small class="p-error block mt-1" *ngIf="f['confirmPassword']?.invalid && f['confirmPassword']?.touched">
          <span *ngIf="f['confirmPassword']?.errors?.['required']">Please confirm your password</span>
        </small>
        <small class="p-error block mt-1" *ngIf="changePasswordForm.errors?.['passwordMismatch'] && f['confirmPassword']?.touched">
          Passwords do not match
        </small>
      </div>

      <!-- Submit Button -->
      <p-button
        type="submit"
        label="Update Password"
        icon="pi pi-check"
        [loading]="loading"
        [disabled]="!changePasswordForm || changePasswordForm.invalid || loading"
        styleClass="w-full"
      ></p-button>

      <!-- Back to Login Link -->
      <div class="text-center">
        <a routerLink="/login" class="text-sm font-medium forgot-link">
          Back to Login
        </a>
      </div>
    </form>
  </main>

  <!-- Footer Copyright -->
  <footer class="fixed bottom-4 text-center w-full pointer-events-none">
    <p class="text-[10px]" style="color: rgba(133, 127, 121, 0.5);">
      Â© 2026 Minted Financial Services. Protected by 256-bit encryption.
    </p>
  </footer>

  <!-- Toast for messages -->
  <p-toast position="top-right"></p-toast>
</div>
