# ============================================
# Minted Application - Docker Configuration
# ============================================
# Copy this file to .env and customize values
# DO NOT commit .env to version control
# ============================================

# Database Configuration
# ----------------------
MINTED_DB_ROOT_PASSWORD=rootroot
MINTED_DB_NAME=minted_db
MINTED_DB_USER=minted_user
MINTED_DB_PASSWORD=minted_pass
MINTED_DB_PORT=3306

# Backend Configuration
# ---------------------
BACKEND_PORT=5500

# JWT Configuration
# IMPORTANT: Generate a secure secret for production using:
# openssl rand -base64 64
MINTED_JWT_SECRET=CHANGE_ME_GENERATE_SECURE_SECRET_USING_OPENSSL_RAND_BASE64_64
MINTED_JWT_EXPIRATION=86400000

# Jasypt Encryption (used for ENC() property values)
# Generate a secure password for production:
# openssl rand -base64 32
MINTED_JASYPT_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD_USING_OPENSSL_RAND_BASE64_32

# API Key Encryption (used to encrypt LLM API keys stored in database)
# If not set, falls back to MINTED_JASYPT_PASSWORD.
# For maximum security, use a separate key:
# openssl rand -base64 32
MINTED_ENCRYPTION_KEY=CHANGE_ME_GENERATE_SEPARATE_KEY_USING_OPENSSL_RAND_BASE64_32

# CORS Configuration
# Add all domains that should be allowed to access the API
# Separate multiple origins with commas (no spaces)
MINTED_CORS_ORIGINS=http://localhost:80,http://localhost:4200

# Logging Configuration
# ---------------------
LOG_LEVEL=INFO
SECURITY_LOG_LEVEL=INFO
JPA_SHOW_SQL=false
JPA_FORMAT_SQL=false

# Frontend Configuration
# ----------------------
FRONTEND_PORT=80

# Image Version (for docker-compose.prod.yml)
# -------------------------------------------
# Pin to a specific release tag, e.g. v1.0.0
# Leave as 'latest' to always pull the newest image
MINTED_VERSION=latest

# ============================================
# Default Credentials (After First Startup)
# ============================================
# The admin user is created automatically on first startup
# with the following credentials:
#
# Username: admin
# Password: admin
#
# IMPORTANT: You will be forced to change the password on first login!
# ============================================

# Quick Start
# -----------
# 1. Copy this file: cp .env.example .env
# 2. Customize values above (especially JWT_SECRET and JASYPT_PASSWORD for production)
# 3. Start services: docker-compose up -d
# 4. Wait for services to be healthy (30-60 seconds)
# 5. Access application: http://localhost
# 6. Login with admin/admin and change password immediately
#
# Management Commands
# -------------------
# View logs: docker-compose logs -f
# View specific service logs: docker-compose logs -f backend
# Stop services: docker-compose down
# Stop and remove volumes: docker-compose down -v
# Rebuild containers: docker-compose build
# Rebuild and restart: docker-compose up -d --build
# Restart specific service: docker-compose restart backend
#
# Troubleshooting
# ---------------
# Check service health: docker-compose ps
# Check container logs: docker-compose logs backend
# Access MySQL: docker-compose exec mysql mysql -u root -p
# Access backend shell: docker-compose exec backend sh
# Access frontend shell: docker-compose exec frontend sh
#
# Production Deployment
# ---------------------
# For production, ensure you:
# 1. Generate secure JWT_SECRET: openssl rand -base64 64
# 2. Generate secure JASYPT_PASSWORD: openssl rand -base64 32
# 3. Generate secure ENCRYPTION_KEY: openssl rand -base64 32
# 4. Use strong database passwords
# 5. Configure proper CORS_ALLOWED_ORIGINS
# 6. Set appropriate LOG_LEVEL (WARN or ERROR)
# 7. Consider using docker-compose.prod.yml with:
#    docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
